<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ejemplos de JavaScript - Programación II</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Prism.js para el resaltado de sintaxis del código -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        body { font-family: 'Inter', sans-serif; }
        .example-box { border: 2px solid #e2e8f0; border-radius: 1rem; overflow: hidden; margin-bottom: 2.5rem; }
        .demo-area { padding: 2rem; background: #f8fafc; border-bottom: 1px solid #e2e8f0; }
        .code-area { background: #1e1e1e; }
        pre { margin: 0 !important; border-radius: 0 !important; font-size: 0.85rem !important; }
    </style>
</head>
<body class="bg-gray-50">

    <header class="bg-blue-700 text-white py-10 shadow-lg">
        <div class="container mx-auto px-4 text-center">
            <h1 class="text-4xl font-black mb-2">Ejemplos Prácticos de JavaScript</h1>
            <p class="text-blue-100 italic">Prueba y analiza estos fragmentos de código - Programación II</p>
        </div>
    </header>

    <main class="container mx-auto px-4 py-12 max-w-5xl">

        <!-- 1. Variables -->
        <section class="example-box">
            <div class="demo-area">
                <h2 class="text-xl font-bold mb-4">1. Variables (let y const)</h2>
                <div id="output-variables" class="p-4 bg-white border rounded font-mono text-sm">Haz clic en el botón para ver el resultado.</div>
                <button onclick="runVariables()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
                    Ejecutar Código
                </button>
            </div>
            <div class="code-area">
                <pre><code class="language-javascript">// Declaración de variables modernas
const materia = "Programación II";
let contador = 10;

function runVariables() {
    // let permite la reasignación
    contador = contador + 5; 
    document.getElementById('output-variables').innerHTML = 
        `Materia: ${materia} <br> Contador: ${contador}`;
}</code></pre>
            </div>
        </section>

        <!-- 2. Funciones de Flecha -->
        <section class="example-box">
            <div class="demo-area">
                <h2 class="text-xl font-bold mb-4">2. Funciones de Flecha (Arrow Functions)</h2>
                <div class="flex items-center gap-2 mb-4">
                    <label>Número:</label>
                    <input type="number" id="num-input" value="5" class="border p-2 rounded w-20">
                </div>
                <button onclick="runArrow()" class="bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700 transition">
                    Calcular Cuadrado
                </button>
                <p id="output-arrow" class="mt-4 font-bold text-purple-700"></p>
            </div>
            <div class="code-area">
                <pre><code class="language-javascript">// Función de flecha con retorno implícito
const cuadrado = x => x * x;

const runArrow = () => {
    const valor = document.getElementById('num-input').value;
    const resultado = cuadrado(valor);
    document.getElementById('output-arrow').innerText = `El resultado es: ${resultado}`;
};</code></pre>
            </div>
        </section>

        <!-- 3. Objetos y Desestructuración -->
        <section class="example-box">
            <div class="demo-area">
                <h2 class="text-xl font-bold mb-4">3. Objetos y Desestructuración</h2>
                <div id="output-destructuring" class="p-4 bg-white border rounded italic">Haz clic para extraer los datos del objeto.</div>
                <button onclick="runDestructuring()" class="mt-4 bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-700 transition">
                    Extraer con Destructuring
                </button>
            </div>
            <div class="code-area">
                <pre><code class="language-javascript">// Objeto literal
const estudiante = {
    nombre: "Carlos",
    edad: 20,
    universidad: "Facultad de Ingeniería"
};

const runDestructuring = () => {
    // Desestructuración: extraemos propiedades a variables individuales
    const { nombre, edad } = estudiante;
    document.getElementById('output-destructuring').innerText = 
        `Nombre: ${nombre}, Edad: ${edad} años`;
};</code></pre>
            </div>
        </section>

        <!-- 4. Métodos de Array (Filter) -->
        <section class="example-box">
            <div class="demo-area">
                <h2 class="text-xl font-bold mb-4">4. Métodos de Array (Filter)</h2>
                <p class="text-sm mb-2 text-gray-500">Lista original: [45, 60, 85, 30, 95]</p>
                <div id="output-filter" class="flex gap-2 min-h-[40px]"></div>
                <button onclick="runFilter()" class="mt-4 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 transition">
                    Filtrar Aprobados (>51)
                </button>
            </div>
            <div class="code-area">
                <pre><code class="language-javascript">const notas = [45, 60, 85, 30, 95];

const runFilter = () => {
    // Filtramos solo los valores mayores a 51
    const aprobados = notas.filter(n => n > 51);
    
    // Mostramos el resultado transformando el array en etiquetas HTML
    document.getElementById('output-filter').innerHTML = aprobados
        .map(n => `&lt;span class="bg-green-200 p-2 rounded"&gt;${n}&lt;/span&gt;`)
        .join('');
};</code></pre>
            </div>
        </section>

        <!-- 5. Métodos del DOM -->
        <section class="example-box">
            <div class="demo-area">
                <h2 class="text-xl font-bold mb-4">5. Métodos del DOM (Crear e Insertar)</h2>
                <div id="container-dom" class="p-4 border-2 border-dashed border-gray-300 min-h-[60px] flex gap-2 flex-wrap"></div>
                <button onclick="runDOM()" class="mt-4 bg-orange-500 text-white px-4 py-2 rounded hover:bg-orange-600 transition">
                    Agregar Elemento Dinámico
                </button>
            </div>
            <div class="code-area">
                <pre><code class="language-javascript">const runDOM = () => {
    const contenedor = document.getElementById('container-dom');
    
    // 1. Creamos el elemento (Create)
    const nuevoDiv = document.createElement('div');
    
    // 2. Asignamos atributos (SetAttribute)
    nuevoDiv.setAttribute('class', 'bg-orange-100 p-2 rounded text-xs border border-orange-300');
    nuevoDiv.innerText = "Elemento " + (contenedor.children.length + 1);
    
    // 3. Lo insertamos en el DOM (Append)
    contenedor.appendChild(nuevoDiv);
};</code></pre>
            </div>
        </section>

        <!-- 6. Async / Await -->
        <section class="example-box">
            <div class="demo-area">
                <h2 class="text-xl font-bold mb-4">6. Peticiones con Async / Await</h2>
                <div id="output-async" class="text-sm text-gray-600 italic">Esperando acción...</div>
                <button onclick="runAsync()" class="mt-4 bg-black text-white px-4 py-2 rounded hover:bg-gray-800 transition">
                    Consultar API Externa
                </button>
            </div>
            <div class="code-area">
                <pre><code class="language-javascript">// Función asíncrona para no bloquear el hilo principal
async function runAsync() {
    const output = document.getElementById('output-async');
    output.innerText = "Cargando datos del servidor...";
    
    try {
        // Realizamos la petición fetch
        const respuesta = await fetch('https://jsonplaceholder.typicode.com/users/1');
        const datos = await respuesta.json();
        
        // Mostramos el nombre obtenido de la API
        output.innerText = "Nombre recibido: " + datos.name;
    } catch (error) {
        output.innerText = "¡Error al conectar con el servidor!";
    }
}</code></pre>
            </div>
        </section>

    </main>

    <footer class="bg-slate-900 text-slate-500 py-10 text-center">
        <p>Ejemplos de JavaScript - Facultad de Ingeniería / Programación II</p>
    </footer>

    <!-- Scripts para Prism y Funciones de los ejemplos -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script>
        // Lógica para Variables
        let contador = 10;
        const materia = "Programación II";
        function runVariables() {
            contador = contador + 5;
            document.getElementById('output-variables').innerHTML = `Materia: ${materia} <br> Contador: ${contador}`;
        }

        // Lógica para Funciones de Flecha
        const cuadrado = x => x * x;
        const runArrow = () => {
            const valor = document.getElementById('num-input').value;
            const resultado = cuadrado(valor);
            document.getElementById('output-arrow').innerText = `El resultado es: ${resultado}`;
        };

        // Lógica para Desestructuración
        const estudiante = { nombre: "Carlos", edad: 20, universidad: "Facultad de Ingeniería" };
        const runDestructuring = () => {
            const { nombre, edad } = estudiante;
            document.getElementById('output-destructuring').innerText = `Nombre: ${nombre}, Edad: ${edad} años`;
        };

        // Lógica para Filtros
        const notasArray = [45, 60, 85, 30, 95];
        const runFilter = () => {
            const aprobados = notasArray.filter(n => n > 51);
            document.getElementById('output-filter').innerHTML = aprobados
                .map(n => `<span class="bg-green-200 px-3 py-1 rounded-full font-bold text-green-800 border border-green-300">${n}</span>`)
                .join('');
        };

        // Lógica para el DOM
        const runDOM = () => {
            const contenedor = document.getElementById('container-dom');
            const nuevoDiv = document.createElement('div');
            nuevoDiv.setAttribute('class', 'bg-orange-100 p-2 rounded text-xs border border-orange-300 shadow-sm animate-pulse');
            nuevoDiv.innerText = "Elemento " + (contenedor.children.length + 1);
            contenedor.appendChild(nuevoDiv);
        };

        // Lógica para Asincronía
        async function runAsync() {
            const output = document.getElementById('output-async');
            output.innerText = "Cargando datos del servidor...";
            try {
                const respuesta = await fetch('https://jsonplaceholder.typicode.com/users/1');
                const datos = await respuesta.json();
                output.innerText = "Nombre recibido de la API: " + datos.name;
                output.classList.add('text-blue-600', 'font-bold');
            } catch (error) {
                output.innerText = "¡Ocurrió un error en la petición!";
            }
        }
    </script>
</body>
</html>
